version: '3.8'

services:
  youtube-api:
    build: .
    container_name: youtube-api
    ports:
      - "8000:8000"
    volumes:
      - ./main.py:/app/main.py  # 코드 변경 시 자동 반영 (선택사항)
    environment:
      - PYTHONUNBUFFERED=1
    restart: unless-stopped
    networks:
      - n8n-network

  # n8n이 이미 실행 중이라면 아래 설정은 주석 처리하세요
  # n8n:
  #   image: n8nio/n8n:latest
  #   container_name: n8n
  #   ports:
  #     - "5678:5678"
  #   environment:
  #     - N8N_BASIC_AUTH_ACTIVE=true
  #     - N8N_BASIC_AUTH_USER=admin
  #     - N8N_BASIC_AUTH_PASSWORD=password
  #   volumes:
  #     - n8n_data:/home/node/.n8n
  #   restart: unless-stopped
  #   networks:
  #     - n8n-network

networks:
  n8n-network:
    name: n8n-network
    external: false  # 이미 존재하면 true로 변경

# volumes:
#   n8n_data: